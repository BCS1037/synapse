"use strict";Object.defineProperty(exports, "__esModule", { value: true });exports.default = void 0;var _zoteroPluginScaffold = await jitiImport("zotero-plugin-scaffold");
var _package = _interopRequireDefault(await jitiImport("./package.json"));function _interopRequireDefault(e) {return e && e.__esModule ? e : { default: e };}var _default = exports.default =

(0, _zoteroPluginScaffold.defineConfig)({
  source: ["src", "addon"],
  dist: ".scaffold/build",
  // Use a stable XPI base name for distribution (keeps mdnotes.xpi),
  // while the visible add-on name remains pkg.config.addonName (Synapse) via manifest placeholders.
  name: "mdnotes",
  id: _package.default.config.addonID,
  namespace: _package.default.config.addonRef,
  updateURL: `https://raw.githubusercontent.com/{{owner}}/{{repo}}/main/${
  _package.default.version.includes("-") ? "update-beta.json" : "update.json"}`,

  xpiDownloadLink:
  "https://github.com/{{owner}}/{{repo}}/releases/download/v{{version}}/{{xpiName}}.xpi",

  build: {
    assets: ["addon/**/*.*"],
    define: {
      ..._package.default.config,
      author: _package.default.author,
      description: _package.default.description,
      homepage: _package.default.homepage,
      buildVersion: _package.default.version,
      buildTime: "{{buildTime}}"
    },
    prefs: {
      prefix: _package.default.config.prefsPrefix
    },
    esbuildOptions: [
    {
      entryPoints: ["src/index.ts"],
      // Avoid using process.env to prevent type errors in tsconfig sandbox
      define: {
        __env__: '"production"'
      },
      bundle: true,
      target: "firefox115",
      outfile: `.scaffold/build/addon/content/scripts/${_package.default.config.addonRef}.js`
    }]

  },

  test: {
    waitForPlugin: `() => Zotero.${_package.default.config.addonInstance}.data.initialized`
  }

  // If you need to see a more detailed log, uncomment the following line:
  // logLevel: "trace",
}); /* v9-934f069c11b03ae0 */
