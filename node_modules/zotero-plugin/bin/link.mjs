#!/usr/bin/env node
var __require = /* @__PURE__ */ ((x) => typeof require !== "undefined" ? require : typeof Proxy !== "undefined" ? new Proxy(x, {
  get: (a, b) => (typeof require !== "undefined" ? require : a)[b]
}) : x)(function(x) {
  if (typeof require !== "undefined") return require.apply(this, arguments);
  throw Error('Dynamic require of "' + x + '" is not supported');
});

// bin/link.ts
import * as fs from "fs";
import * as path from "path";

// root.ts
var root_default = process.cwd();

// bin/link.ts
var pkg = { ...__require(path.join(root_default, "package.json")) };
if (!pkg.id) pkg.id = `${pkg.name}@${pkg.author.email.replace(/.*@/, "")}`.toLowerCase();
if (pkg.xpi) Object.assign(pkg, pkg.xpi);
var build = path.join(root_default, "build");
var zotero = process.argv[2];
if (!zotero) {
  console.log("No directory specified");
  process.exit(1);
}
var extensions = path.join(zotero, "extensions");
if (!fs.existsSync(extensions)) {
  console.log(`${extensions} does not exist`);
  process.exit(1);
}
var extension = path.join(extensions, pkg.id);
fs.writeFileSync(extension, build);
